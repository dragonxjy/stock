var $=(w,i,l)=>new Promise((d,o)=>{var r=a=>{try{g(l.next(a))}catch(_){o(_)}},y=a=>{try{g(l.throw(a))}catch(_){o(_)}},g=a=>a.done?d(a.value):Promise.resolve(a.value).then(r,y);g((l=l.apply(w,i)).next())});import{_ as ot}from"./index-BeltsHFN.js";import{a as Z,r as W,p as m,o as h,M as C,B as s,e as v,O as X,u as t,Q as nt,I as at,w as D,a4 as it,E as n,D as u,A as lt,a5 as ct,z as _t,N as dt,a6 as rt,F as Y,a7 as pt}from"./vendor-DixqdoKt.js";import{a as L,u as x}from"./stock-X0YulnmI.js";import{_ as I,u as ut}from"./index-BXVDO5jB.js";import{_ as mt}from"./customHeader-B56jzoOn.js";import{_ as ht}from"./MainButton.vue_vue_type_script_setup_true_lang-B7_wmTtQ.js";import{p as b}from"./big-Bs49lsdF.js";import{_ as ft}from"./like-CCpO5s7p.js";import{g as f}from"./index-BW6EuzMu.js";import"./loading-8XKiFQcW.js";import"./index-CyUaUaxn.js";const gt={class:"kline_setting"},kt={class:"list_box_tab"},bt=["onClick"],vt={class:"methods-list"},yt=["onClick"],$t=Z({__name:"resolution",setup(w){const i=L(),l=W(3),d=(a,_)=>$(this,null,function*(){i.klineParams.interval=a,i.selectedResolution=i.activeList[_],l.value=_,i.klineLoading=!0;try{yield i.getKlineData()}finally{i.klineLoading=!1}}),o=[{label:"VOL",type:"main"},{label:"MA",type:"main"},{label:"EMA",type:"main"},{label:"SMA",type:"sub"},{label:"BOLL",type:"main"},{label:"SAR",type:"main"}],r=W(!1),y=a=>{a.type=="main"?i.chart.createIndicator(a.label,!1,{id:"candle_pane"}):a.type=="sub"&&i.chart.createIndicator(a.label,!0,{id:"pane_1"}),r.value=!1},g=()=>{r.value=!0};return(a,_)=>{const e=nt,c=ot;return h(),m(C,null,[s("div",gt,[s("div",kt,[(h(!0),m(C,null,X(t(i).activeList,(p,k)=>(h(),m("span",{class:u(t(l)===k?"tabs list_box_tab_active":"tabs"),key:k,onClick:S=>d(p.value,k)},n(p.name),11,bt))),128))]),v(e,{name:"setting",size:"24",onClick:g})]),v(c,{position:"center",modelValue:t(r),"onUpdate:modelValue":_[0]||(_[0]=p=>at(r)?r.value=p:null)},{default:D(()=>[s("div",vt,[(h(),m(C,null,X(o,(p,k)=>s("div",{class:"list-item",key:k,onClick:it(S=>y(p),["stop"])}," + "+n(p.label),9,yt)),64))])]),_:1},8,["modelValue"])],64)}}}),wt=I($t,[["__scopeId","data-v-996e7888"]]),St={id:"chart"},Ct={__name:"kline",setup(w){return L(),ut(),x(),(i,l)=>(h(),m("div",St))}},Dt=I(Ct,[["__scopeId","data-v-7ab49c1c"]]),Lt={class:"market_detail"},It={class:"header"},Nt={class:"head_left"},Pt={class:"stockName"},Mt={class:"chg"},Vt={class:"close"},Bt={class:"head_right"},Rt={class:"chart"},At={class:"chartInfo"},Ot={class:"data_box"},Ft={class:"data_box_item"},Kt={class:"text"},zt={class:"text"},Et={class:"data_box_item"},Ut={class:"text"},jt={class:"text"},qt={class:"data_box_item"},Ht={class:"text"},Tt={class:"text"},Qt={class:"chartRef"},Gt=Z({__name:"index",setup(w){const i=lt(),l=x(),d=L(),{klineShowData:o}=ct(d),r=_t(),y=e=>{let c="";return Number(e)?Number(e)>=1e9?c=(Number(e)/1e9).toFixed(2)+"B":Number(e)<1e6?c=(Number(e)/1e3).toFixed(2)+"K":c=(Number(e)/1e6).toFixed(2)+"M":c="0",c},g=()=>$(this,null,function*(){try{d.klineLoading=!0,yield d.getKlineData()}finally{d.klineLoading=!1}}),a=()=>$(this,null,function*(){const e=Object.keys(l.stockDetail).length>0,c=r.query.stockId;c&&!e&&(yield l.getStockDetail({stockId:c})),yield g()});dt(()=>$(this,null,function*(){yield a()}));const _=()=>{i.push({name:"dealings",query:{stockId:l.stockDetail.id}})};return(e,c)=>{var N,P,M,V,B,R,A,O,F,K,z,E;const p=ht,k=mt,S=Dt,tt=wt,st=rt("loading");return h(),m("div",Lt,[v(k,null,{default:D(()=>{var U,j,q,H,T,Q,G,J;return[s("div",It,[s("div",Nt,[s("div",Pt,n((U=t(o))==null?void 0:U.stockName),1),s("div",Mt,[s("div",Vt,n(("point_"in e?e.point_:t(b))((j=t(o))==null?void 0:j.close)),1),(q=t(o))!=null&&q.chg?(h(),m("span",{key:0,class:u([t(f)((H=t(o))==null?void 0:H.chg),"with-bg"])},n(("point_"in e?e.point_:t(b))((T=t(o))==null?void 0:T.chg)),3)):Y("",!0),(Q=t(o))!=null&&Q.chgPct?(h(),m("span",{key:1,class:u([t(f)((G=t(o))==null?void 0:G.chgPct),"with-bg"])}," ("+n(("point_"in e?e.point_:t(b))((J=t(o))==null?void 0:J.chgPct))+"%) ",3)):Y("",!0)])]),s("div",Bt,[v(p,{class:"buy",round:!1,onClick:_},{default:D(()=>[s("p",null,n(e.$t("Buy")),1)]),_:1}),v(ft,{class:"like",round:!1,"model-value":t(l).stockDetail,"onUpdate:modelValue":c[0]||(c[0]=et=>Object.assign(t(l).stockDetail,et))},null,8,["model-value"])])])]}),_:1}),s("div",Rt,[s("div",At,[s("div",Ot,[s("div",Ft,[s("p",Kt,[s("span",null,n(e.$t("Open")),1),s("span",{class:u(["font_bold",t(f)((N=t(o))==null?void 0:N.chgPct)])},n(("point_"in e?e.point_:t(b))((P=t(o))==null?void 0:P.open)),3)]),s("p",zt,[s("span",null,n(e.$t("Close")),1),s("span",{class:u(["font_bold",t(f)((M=t(o))==null?void 0:M.chgPct)])},n(("point_"in e?e.point_:t(b))((V=t(o))==null?void 0:V.close)),3)])]),s("div",Et,[s("p",Ut,[s("span",null,n(e.$t("High")),1),s("span",{class:u(["font_bold",t(f)((B=t(o))==null?void 0:B.chgPct)])},n(("point_"in e?e.point_:t(b))((R=t(o))==null?void 0:R.high)),3)]),s("p",jt,[s("span",null,n(e.$t("Marketcap")),1),s("span",{class:u(["font_bold",t(f)((A=t(o))==null?void 0:A.chgPct)])},n(y((O=t(o))==null?void 0:O.fundamentalMarketCap)),3)])]),s("div",qt,[s("p",Ht,[s("span",null,n(e.$t("Low")),1),s("span",{class:u(["font_bold",t(f)((F=t(o))==null?void 0:F.chgPct)])},n(("point_"in e?e.point_:t(b))((K=t(o))==null?void 0:K.low)),3)]),s("p",Tt,[s("span",null,n(e.$t("Vol")),1),s("span",{class:u(["font_bold",t(f)((z=t(o))==null?void 0:z.chgPct)])},n(y((E=t(o))==null?void 0:E.volume)||0),3)])])]),pt((h(),m("div",Qt,[v(S)])),[[st,t(d).klineLoading]]),v(tt)])])])}}}),is=I(Gt,[["__scopeId","data-v-f2af82e8"]]);export{is as default};
